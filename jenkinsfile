pipeline {
    agent { label 'my-label1-&&-my-label_jdk_17'}
    stages {
		stage('git') {
			steps {
				git url: 'https://github.com/spring-projects/spring-petclinic.git', branch: 'main'
			}
		}
		stage('build') {
			steps {
				withSonarQubeEnv(credentialsId: 'SONAR_CLOUD', installationName: 'sonarcloud') { // You can override the credential to be used
					sh 'mvn clean package org.sonarsource.scanner.maven:sonar-maven-plugin:3.7.0.1746:sonar -D sonar.organization=jenkinspipelineqt -D sonar.projectKey=67f70d2f13986e813c093d2c3376cb053ad103d3'
				}
				junit testResults: '**/surefire-reports/*.xml'
				archive '**/target/spring-petclinic-*.jar'
			}
		
		}
	
  }


}